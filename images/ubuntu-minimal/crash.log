2025/07/18 21:57:03 [INFO] Packer version: 1.10.0 [go1.20.11 linux amd64]
2025/07/18 21:57:03 [TRACE] discovering plugins in /usr/local/bin
2025/07/18 21:57:03 [TRACE] discovering plugins in .
2025/07/18 21:57:03 [TRACE] discovering plugins in /home/ubuntu/.config/packer/plugins
2025/07/18 21:57:03 [INFO] Discovered potential plugin: meda = /home/ubuntu/.config/packer/plugins/github.com/cirunlabs/meda/packer-plugin-meda_v1.0.0_x5.0_linux_amd64
2025/07/18 21:57:03 [INFO] found external [vm] builders from meda plugin
2025/07/18 21:57:03 [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/07/18 21:57:03 [INFO] PACKER_CONFIG env var set; attempting to open config file: /home/ubuntu/.packerconfig
2025/07/18 21:57:03 [WARN] Config file doesn't exist: /home/ubuntu/.packerconfig
2025/07/18 21:57:03 [INFO] Setting cache directory: /home/ubuntu/.cache/packer
e: Running in background, not using a TTY
2025/07/18 21:57:03 [TRACE] listing potential installations for "github.com/cirunlabs/meda" that match ">= 1.0.0". plugingetter.ListInstallationsOptions{FromFolders:[]string{"/usr/local/bin", ".", "/home/ubuntu/.config/packer/plugins"}, BinaryInstallationOptions:plugingetter.BinaryInstallationOptions{APIVersionMajor:"5", APIVersionMinor:"0", OS:"linux", ARCH:"amd64", Ext:"", Checksummers:[]plugingetter.Checksummer{plugingetter.Checksummer{Type:"sha256", Hash:(*sha256.digest)(0xc0003d4380)}}}}
2025/07/18 21:57:03 [TRACE] Found the following "github.com/cirunlabs/meda" installations: [{/home/ubuntu/.config/packer/plugins/github.com/cirunlabs/meda/packer-plugin-meda_v1.0.0_x5.0_linux_amd64 v1.0.0}]
2025/07/18 21:57:03 [INFO] found external [vm] builders from meda plugin
2025/07/18 21:57:03 [TRACE] validateValue: not active for image_tag, so skipping
2025/07/18 21:57:03 [INFO] Starting external plugin /home/ubuntu/.config/packer/plugins/github.com/cirunlabs/meda/packer-plugin-meda_v1.0.0_x5.0_linux_amd64 start builder vm
2025/07/18 21:57:03 Starting plugin: /home/ubuntu/.config/packer/plugins/github.com/cirunlabs/meda/packer-plugin-meda_v1.0.0_x5.0_linux_amd64 []string{"/home/ubuntu/.config/packer/plugins/github.com/cirunlabs/meda/packer-plugin-meda_v1.0.0_x5.0_linux_amd64", "start", "builder", "vm"}
2025/07/18 21:57:03 Waiting for RPC address for: /home/ubuntu/.config/packer/plugins/github.com/cirunlabs/meda/packer-plugin-meda_v1.0.0_x5.0_linux_amd64
2025/07/18 21:57:03 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 2025/07/18 21:57:03 Plugin address: unix /tmp/packer-plugin1869114465
2025/07/18 21:57:03 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 2025/07/18 21:57:03 Waiting for connection...
2025/07/18 21:57:03 Received unix RPC address for /home/ubuntu/.config/packer/plugins/github.com/cirunlabs/meda/packer-plugin-meda_v1.0.0_x5.0_linux_amd64: addr is /tmp/packer-plugin1869114465
2025/07/18 21:57:03 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 2025/07/18 21:57:03 Serving a plugin connection...
2025/07/18 21:57:03 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 2025/07/18 21:57:03 [TRACE] starting builder vm
2025/07/18 21:57:03 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 2025/07/18 21:57:03 [DEBUG] - common: sending ConfigSpec as gob
2025/07/18 21:57:03 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 2025/07/18 21:57:03 [DEBUG] - common: sending ConfigSpec as gob
2025/07/18 21:57:03 [INFO] Starting internal plugin packer-provisioner-shell
2025/07/18 21:57:03 Starting plugin: /usr/local/bin/packer []string{"/usr/local/bin/packer", "plugin", "packer-provisioner-shell"}
2025/07/18 21:57:03 Waiting for RPC address for: /usr/local/bin/packer
2025/07/18 21:57:03 packer-provisioner-shell plugin: [INFO] Packer version: 1.10.0 [go1.20.11 linux amd64]
2025/07/18 21:57:03 packer-provisioner-shell plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/07/18 21:57:03 packer-provisioner-shell plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /home/ubuntu/.packerconfig
2025/07/18 21:57:03 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /home/ubuntu/.packerconfig
2025/07/18 21:57:03 packer-provisioner-shell plugin: [INFO] Setting cache directory: /home/ubuntu/.cache/packer
2025/07/18 21:57:03 packer-provisioner-shell plugin: args: []string{"packer-provisioner-shell"}
2025/07/18 21:57:03 packer-provisioner-shell plugin: Plugin address: unix /tmp/packer-plugin753776930
2025/07/18 21:57:03 packer-provisioner-shell plugin: Waiting for connection...
2025/07/18 21:57:03 Received unix RPC address for /usr/local/bin/packer: addr is /tmp/packer-plugin753776930
2025/07/18 21:57:03 packer-provisioner-shell plugin: Serving a plugin connection...
2025/07/18 21:57:03 [INFO] Starting internal plugin packer-post-processor-manifest
2025/07/18 21:57:03 Starting plugin: /usr/local/bin/packer []string{"/usr/local/bin/packer", "plugin", "packer-post-processor-manifest"}
2025/07/18 21:57:03 Waiting for RPC address for: /usr/local/bin/packer
2025/07/18 21:57:03 packer-post-processor-manifest plugin: [INFO] Packer version: 1.10.0 [go1.20.11 linux amd64]
2025/07/18 21:57:03 packer-post-processor-manifest plugin: [INFO] PACKER_CONFIG env var not set; checking the default config file path
2025/07/18 21:57:03 packer-post-processor-manifest plugin: [INFO] PACKER_CONFIG env var set; attempting to open config file: /home/ubuntu/.packerconfig
2025/07/18 21:57:03 packer-post-processor-manifest plugin: [WARN] Config file doesn't exist: /home/ubuntu/.packerconfig
2025/07/18 21:57:03 packer-post-processor-manifest plugin: [INFO] Setting cache directory: /home/ubuntu/.cache/packer
2025/07/18 21:57:03 packer-post-processor-manifest plugin: args: []string{"packer-post-processor-manifest"}
2025/07/18 21:57:03 packer-post-processor-manifest plugin: Plugin address: unix /tmp/packer-plugin1556588509
2025/07/18 21:57:03 packer-post-processor-manifest plugin: Waiting for connection...
2025/07/18 21:57:03 Received unix RPC address for /usr/local/bin/packer: addr is /tmp/packer-plugin1556588509
2025/07/18 21:57:03 packer-post-processor-manifest plugin: Serving a plugin connection...
2025/07/18 21:57:03 ui: [1;32mubuntu-minimal.meda-vm.ubuntu-minimal: output will be in this color.[0m
2025/07/18 21:57:03 ui: 
2025/07/18 21:57:03 Build debug mode: false
2025/07/18 21:57:03 Force build: false
2025/07/18 21:57:03 On error: 
2025/07/18 21:57:03 Waiting on builds to complete...
2025/07/18 21:57:03 Starting build run: ubuntu-minimal.meda-vm.ubuntu-minimal
2025/07/18 21:57:03 Running builder: 
2025/07/18 21:57:03 [INFO] (telemetry) Starting builder meda-vm.ubuntu-minimal
2025/07/18 21:57:03 ui: [1;32m==> ubuntu-minimal.meda-vm.ubuntu-minimal: Creating VM 'packer-ubuntu-minimal-build-1752875823' with base image 'ubuntu:latest'[0m
2025/07/18 21:57:04 ui: [1;32m==> ubuntu-minimal.meda-vm.ubuntu-minimal: VM 'packer-ubuntu-minimal-build-1752875823' created successfully[0m
2025/07/18 21:57:04 ui: [1;32m==> ubuntu-minimal.meda-vm.ubuntu-minimal: Starting VM 'packer-ubuntu-minimal-build-1752875823'[0m
2025/07/18 21:57:07 ui: [1;32m==> ubuntu-minimal.meda-vm.ubuntu-minimal: VM 'packer-ubuntu-minimal-build-1752875823' started successfully[0m
2025/07/18 21:57:07 ui: [1;32m==> ubuntu-minimal.meda-vm.ubuntu-minimal: Waiting for VM 'packer-ubuntu-minimal-build-1752875823' to be ready...[0m
2025/07/18 21:57:17 ui: [1;32m==> ubuntu-minimal.meda-vm.ubuntu-minimal: VM is ready with IP: 192.168.45.2[0m
2025/07/18 21:57:17 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 2025/07/18 21:57:17 Unable to load communicator config from state to populate provisionHookData
2025/07/18 21:57:17 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 2025/07/18 21:57:17 Running the provision hook
2025/07/18 21:57:17 [INFO] (telemetry) Starting provisioner shell
2025/07/18 21:57:17 ui: [1;32m==> ubuntu-minimal.meda-vm.ubuntu-minimal: Pausing 30s before the next provisioner...[0m
2025/07/18 21:57:47 ui: [1;32m==> ubuntu-minimal.meda-vm.ubuntu-minimal: Provisioning with shell script: /tmp/packer-shell3400085955[0m
2025/07/18 21:57:47 packer-provisioner-shell plugin: Opening /tmp/packer-shell3400085955 for reading
2025/07/18 21:57:47 packer-provisioner-shell plugin: [INFO] 151 bytes written for 'uploadData'
2025/07/18 21:57:47 [INFO] 151 bytes written for 'uploadData'
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: panic: runtime error: invalid memory address or nil pointer dereference
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: [signal SIGSEGV: segmentation violation code=0x1 addr=0x30 pc=0xe1a7e0]
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: goroutine 72 [running]:
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: github.com/hashicorp/packer-plugin-sdk/rpc.(*CommunicatorServer).Upload(0xc0005a5560, 0xc0005ae560, 0x0?)
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 	/home/ubuntu/go/pkg/mod/github.com/hashicorp/packer-plugin-sdk@v0.6.2/rpc/communicator.go:304 +0x140
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: reflect.Value.call({0xc0000a3c20?, 0xc00011ca48?, 0x13?}, {0x1134b73, 0x4}, {0xc00008eef8, 0x3, 0x3?})
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 	/usr/local/go/src/reflect/value.go:584 +0xca6
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: reflect.Value.Call({0xc0000a3c20?, 0xc00011ca48?, 0xc00052a750?}, {0xc00052a6f8?, 0xc00052a6f8?, 0xc00052a6bc?})
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 	/usr/local/go/src/reflect/value.go:368 +0xb9
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: net/rpc.(*service).call(0xc000617000, 0xc000624320, 0xc000510798, 0xc0005107a0, 0xc0004ba300, 0xc00001bb00, {0xf0d9c0?, 0xc0005ae560?, 0xe0da85?}, {0xf08440, ...}, ...)
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 	/usr/local/go/src/net/rpc/server.go:381 +0x209
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: created by net/rpc.(*Server).ServeCodec in goroutine 68
2025/07/18 21:57:47 packer-plugin-meda_v1.0.0_x5.0_linux_amd64 plugin: 	/usr/local/go/src/net/rpc/server.go:478 +0x3ca
2025/07/18 21:57:47 [INFO] (telemetry) ending meda-vm.ubuntu-minimal
2025/07/18 21:57:47 /home/ubuntu/.config/packer/plugins/github.com/cirunlabs/meda/packer-plugin-meda_v1.0.0_x5.0_linux_amd64: plugin process exited
2025/07/18 21:57:47 ui error: [1;31mBuild 'ubuntu-minimal.meda-vm.ubuntu-minimal' errored after 43 seconds 859 milliseconds: unexpected EOF[0m
2025/07/18 21:57:47 ui: 
==> Wait completed after 43 seconds 859 milliseconds
2025/07/18 21:57:47 machine readable: error-count []string{"1"}
2025/07/18 21:57:47 ui error: 
==> Some builds didn't complete successfully and had errors:
2025/07/18 21:57:47 machine readable: ubuntu-minimal.meda-vm.ubuntu-minimal,error []string{"unexpected EOF"}
2025/07/18 21:57:47 ui error: --> ubuntu-minimal.meda-vm.ubuntu-minimal: unexpected EOF
2025/07/18 21:57:47 ui: 
==> Builds finished but no artifacts were created.
2025/07/18 21:57:47 packer-provisioner-shell plugin: Retryable error: Error uploading script: unexpected EOF
2025/07/18 21:57:47 [INFO] (telemetry) Finalizing.
2025/07/18 21:57:47 waiting for all plugin processes to complete...
2025/07/18 21:57:47 /usr/local/bin/packer: plugin process exited
2025/07/18 21:57:47 [INFO] (telemetry) ending shell
2025/07/18 21:57:47 /usr/local/bin/packer: plugin process exited
